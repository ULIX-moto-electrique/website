---
const { title, subtitle, slider_img } = Astro.props
import { withBaseUrl } from '../utils/pathUtils.js'
---

<section id="slider">
  <div class="relative bs-container bs-mt-md max-w-4xl">

    <!-- Small screens: title before slider (no background) -->
    <div class="md:hidden w-full text-center pb-4">
      <div class="px-4">
        <h1 class="bs-h1">{title}</h1>
        <h2 class="bs-h2 my-4">{subtitle}</h2>
      </div>
    </div>

    <!-- Slides -->
    <div class="js-fc-swiper swiper select-none">
      <div class="swiper-wrapper">

        { slider_img.map( item =>

        // Slides
        <div class="swiper-slide bg-surface-0 border border-surface-2 rounded-xl overflow-hidden h-auto!">

          <figure class="relative flex flex-col gap-6 isolate w-full aspect-video">

            <img src={ withBaseUrl(item.image) } alt={ item.image_alt } loading="lazy"
              class="rounded-xl overflow-hidden w-full h-full object-cover object-left absolute inset-0"
              height="1024" width="768" />

          </figure>

        </div>

        )}

      </div>
    </div>

    <!-- Centered overlay title (visible on md+ with background) -->
    <div class="hidden md:flex pointer-events-none absolute inset-0 z-10 items-center justify-center">
      <div class="bg-black/60 rounded-xl text-white px-8 py-5 mx-8 text-center">
        <h1 class="bs-h1">{title}</h1>
        <h2 class="bs-h2">{subtitle}</h2>
      </div>
    </div>

  </div>
</section>

<script>
import Swiper from "swiper"
import { Autoplay } from 'swiper/modules';
import 'swiper/css'
import 'swiper/css/autoplay'

new Swiper('.js-fc-swiper', {
  modules: [Autoplay],
  slidesPerView: 1,
  spaceBetween: 30,
  loop: true,
  speed: 1000,
  autoplay: {
    delay: 5000,
  },
})
</script>
